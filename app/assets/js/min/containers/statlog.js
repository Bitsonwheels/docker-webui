!function e(t,a,n){function r(c,o){if(!a[c]){if(!t[c]){var u="function"==typeof require&&require;if(!o&&u)return u(c,!0);if(s)return s(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var i=a[c]={exports:{}};t[c][0].call(i.exports,function(e){var a=t[c][1][e];return r(a?a:e)},i,i.exports,e,t,a,n)}return a[c].exports}for(var s="function"==typeof require&&require,c=0;c<n.length;c++)r(n[c]);return r}({1:[function(e,t,a){function n(e){if(!l){var t=$("#container-id").val(),a="",n="";switch(e){case 1:a="restart",n="restarted";break;case 2:a="start",n="started";break;case 3:a="stop",n="stopped";break;default:return}app.func.ajax({type:"POST",url:"/api/container/"+a+"/"+t,success:function(e){var t=e.error?e.error:n+" successfully.";alert(t)}})}}function r(e){var t=$('#refresh-window a[href="#'+e+'"]'),a=t.closest(".btn-group").removeClass("open");u.refresh=e,app.storage.set("refresh-window-stat",e),a.find(".caption").text("refresh / "+t.text()).blur()}function s(e){var t=$('#monitoring-count a[href="#'+e+'"]'),a=t.closest(".btn-group").removeClass("open");u.count=e,app.storage.set("monitoring-count-stat",e),a.find(".caption").text(t.text()).blur()}function c(){u.refresh>0&&ReactDOM.render(React.createElement(d,null),document.getElementById("logs")),setTimeout(c,1e3*Math.max(1,u.refresh))}var o={previous:[],current:[]},u={refresh:app.storage.get("refresh-window-stat",1),count:app.storage.get("monitoring-count-stat",20)},l=!1;$(document).ready(function(){$("#menu-logs").addClass("active"),l="true"==$("#mode-view-only").val(),$("#actions>.btn-default").hover(function(){$(this).addClass($(this).attr("data-hover"))},function(){$(this).removeClass($(this).attr("data-hover"))}).click(function(e){n(parseInt($(this).blur().attr("href").substring(1),10)),app.func.stop(e)}),r(u.refresh),$("#refresh-window a").click(function(e){r(parseInt($(this).attr("href").substring(1),10)),app.func.stop(e)}),s(u.count),$("#monitoring-count a").click(function(e){s(parseInt($(this).attr("href").substring(1),10)),app.func.stop(e)}),setInterval(function(){ReactDOM.render(React.createElement(m,null),document.getElementById("statistics"))},1e3),c()});var i=React.createClass({displayName:"StatTableRow",render:function(){var e=this.props.content.current,t=this.props.content.previous,a=0,n=0,r=0;t&&e.cpu_stats&&(a=e.cpu_stats.cpu_usage.total_usage-t.cpu_stats.cpu_usage.total_usage,n=e.cpu_stats.system_cpu_usage-t.cpu_stats.system_cpu_usage),n>0&&a>0&&(r=100*a/n*e.cpu_stats.cpu_usage.percpu_usage.length);var s="",c={usage:"-",max:"-",limit:"-",percent:0},o={"in":"",out:"",inPacket:"",outPacket:""};return e.read&&(s=e.read.substring(5,19).replace(/-/,"/").replace("T"," "),c={usage:app.func.byteFormat(e.memory_stats.usage),max:app.func.byteFormat(e.memory_stats.max_usage),limit:app.func.byteFormat(e.memory_stats.limit),percent:100*e.memory_stats.usage/e.memory_stats.limit},o={"in":app.func.byteFormat(e.networks.eth0.rx_bytes),out:app.func.byteFormat(e.networks.eth0.tx_bytes),inPacket:e.networks.eth0.rx_packets,outPacket:e.networks.eth0.tx_packets}),React.createElement("tr",null,React.createElement("td",{className:"data-name"},s),React.createElement("td",{className:"data-name"},(r+"").substring(0,4),"%"),React.createElement("td",{className:"data-name"},c.usage," / ",c.max," / ",c.limit),React.createElement("td",{className:"data-name"},(c.percent+"").substring(0,4),"%"),React.createElement("td",{className:"data-name"},o["in"]," / ",o.out),React.createElement("td",{className:"data-name"},o.inPacket," / ",o.outPacket))}}),m=React.createClass({displayName:"StatTable",getInitialState:function(){return{data:{previous:[],current:[]}}},load:function(e){var t=$("#container-id").val(),a=$("#client-id").val();a=a?"?client="+a:"",app.func.ajax({type:"GET",url:"/api/container/stats/"+t+a,success:function(t){t.error?(o.previous=!0,o.current=t):(o.previous=o.current,o.current=t),e.setState({data:o})}})},componentDidMount:function(){this.load(this)},componentWillReceiveProps:function(){this.load(this)},render:function(){var e=this.state.data,t=[];return $.map(e.current,function(a,n){t.push(React.createElement(i,{key:n,content:{previous:e.previous[n],current:a}}))}),React.createElement("table",{className:"table table-striped table-hover"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Time"),React.createElement("th",null,"CPU %"),React.createElement("th",null,"MEM USAGE / MAX / LIMIT"),React.createElement("th",null,"MEM %"),React.createElement("th",null,"NET I/O"),React.createElement("th",null,"NET I/O (packet)"))),React.createElement("tbody",null,t))}});ReactDOM.render(React.createElement(m,null),document.getElementById("statistics"));var p=React.createClass({displayName:"LogTableRow",render:function(){var e=this.props.content;return React.createElement("tr",null,React.createElement("td",{className:"data-name no-wrap"},e.time),React.createElement("td",{className:"data-name"},e.type),React.createElement("td",{className:"data-name"},e.log.replace(/\[[0-9]+m/g,"")))}}),d=React.createClass({displayName:"LogTable",getInitialState:function(){return{data:[]}},load:function(e){var t=$("#container-id").val(),a=$("#client-id").val(),n={count:u.count};a&&(n.client=a),app.func.ajax({type:"GET",url:"/api/container/logs/"+t,data:n,success:function(t){if(t.error)return void e.setState({data:[]});var a=[];$.map(t.stdout,function(e){a.push({type:"stdlog",key:e.substring(0,30),time:e.substring(11,19),log:e.substring(31)})}),$.map(t.stderr,function(e){a.push({type:"stderr",key:e.substring(0,30),time:e.substring(11,19),log:e.substring(31)})}),a.sort(function(e,t){var a=new Date(e.key.substring(0,19)+"Z")-new Date(t.key.substring(0,19)+"Z");return 0!=a?a:parseInt(e.key.substring(20),10)-parseInt(t.key.substring(20),10)}),e.setState({data:a}),$(".logs").fadeIn()}})},componentDidMount:function(){this.load(this)},componentWillReceiveProps:function(){this.load(this)},render:function(){var e=[];return this.state.data.map(function(t,a){t.log&&e.push(React.createElement(p,{key:a,content:t}))}),React.createElement("table",{className:"table table-striped table-hover"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Time"),React.createElement("th",null,"Type"),React.createElement("th",null,"Log"))),React.createElement("tbody",null,e))}});ReactDOM.render(React.createElement(d,null),document.getElementById("logs"))},{}]},{},[1]);