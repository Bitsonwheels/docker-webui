!function e(t,a,n){function i(c,r){if(!a[c]){if(!t[c]){var o="function"==typeof require&&require;if(!r&&o)return o(c,!0);if(l)return l(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var d=a[c]={exports:{}};t[c][0].call(d.exports,function(e){var a=t[c][1][e];return i(a?a:e)},d,d.exports,e,t,a,n)}return a[c].exports}for(var l="function"==typeof require&&require,c=0;c<n.length;c++)i(n[c]);return i}({1:[function(e,t,a){function n(){var e=$(".client-filters").hide(),t=!1,a=0;if(e.find("ul.dropdown-menu").html(""),$.map(p,function(e){t||v.client!=e.key||(t=e.value),a++}),t&&e.find(".caption").text(t),!(1>=a)){var n='<li><a href="#-1">All</a></li>';$.map(p,function(e){n+='<li><a href="#'+e.key+'">'+e.value+"</a></li>"}),e.find("ul.dropdown-menu").html(n),e.fadeIn(),$("#client-filter .dropdown-menu a").click(function(e){var t=$(this),a=t.closest(".btn-group").removeClass("open");a.find(".caption").text(t.text()).blur(),v.client=t.attr("href").substring(1),u.setProps({reload:!1}),app.func.stop(e)})}}function i(){var e=$(".label-filters").hide(),t=!1,a=0;if(e.find("ul.dropdown-menu").html(""),$.map(f,function(e){t||v.label!=app.func.hash(e.key+"->"+e.value)||(t=e.value),a++}),t||-1!=v.label||(t="Not Labeled"),t&&e.find(".caption").text(t),!(1>=a)){var n='<li><a href="#0">All</a></li>',i="";n+='<li><a href="#-1">Not Labeled</a></li>',$.map(f,function(e){i!=e.key&&(n+='<li class="dropdown-header">'+e.key+"</li>",i=e.key);var t=e.value;t.length>20&&(t=t.substring(0,20)+".."),t="&nbsp;&nbsp;&nbsp;&nbsp;"+t,n+='<li><a href="#'+app.func.hash(e.key+"->"+e.value)+'">'+t+"</a></li>"}),e.find("ul.dropdown-menu").html(n),e.fadeIn(),$("#label-filter .dropdown-menu a").click(function(e){var t=$(this),a=t.closest(".btn-group").removeClass("open");if(a.find(".caption").text(t.text().trim()).blur(),v.label=t.attr("href").substring(1),window.history&&window.history.pushState){var n=0==v.label?"/":"/?l="+v.label;history.pushState(null,null,n)}u.setProps({reload:!1}),app.func.stop(e)})}}function l(e){var t=$('#status-filter a[href="#'+e+'"]'),a=t.closest(".btn-group").removeClass("open");a.find(".caption").text(t.text()).blur(),app.storage.set("filters-status",e),v.status=e}function c(){var e=$("#search-text").val().replace(/\s/g," ").replace(/　/g," ");e=e.replace(/^\s+|\s+$/gm,"").toUpperCase(),v.text!=e&&(v.text=e,u.setProps({reload:!1}))}function r(e){e=e?e:E,e.format=e.format?e.format:function(e){return JSON.stringify(e,!0," ")};var t=$("#container-detail"),a=t.find(".details").hide();app.func.ajax({type:"GET",url:e.url,data:e.conditions,success:function(n){t.find(".detail-title").text(e.title),a.text(e.format(n)).fadeIn(),t.modal("show"),E=e},error:function(t,a,n){e.err&&alert(e.err)}})}function o(e,t,a){var n={name:a};e&&(n.client=e),app.func.ajax({type:"POST",url:"/api/container/rename/"+t,data:n,success:function(e){return-1==e.indexOf("successfully")?void alert(e):void u.setProps({reload:!0})}})}function s(e,t,a,n,i,l){var c={repo:a,tag:n,msg:i,author:l};e&&(c.client=e),app.func.ajax({type:"POST",url:"/api/container/commit/"+t,data:c,success:function(e){var t=e.error?e.error:"committed successfully.";alert(t)}})}function d(e,t){return p.length>1?e:t}var u,m=app.func.query("q"),p=[],f=[],h=[],g="",v={client:app.func.query("c",-1),status:app.storage.get("filters-status",3),label:parseInt(app.func.query("l","0"),10),text:""},R=!1;""!=m&&(v.text=m.replace(/\s/g," ").replace(/　/g," "),v.text=v.text.replace(/^\s+|\s+$/gm,"").toUpperCase()),$(document).ready(function(){$("#menu-containers").addClass("active"),$("#container-detail pre").css({height:$(window).height()-200+"px"}),g=$("#override-label-id").val(),R="true"==$("#mode-view-only").val();var e=$("#search-text").blur(c);""!=m&&e.val(m),l(v.status),$("#status-filter .dropdown-menu a").click(function(e){l(parseInt($(this).attr("href").substring(1),10)),u.setProps({reload:!0}),app.func.stop(e)}),$(".detail-refresh a").click(function(e){r(),app.func.stop(e)}),$("#container-name").on("shown.bs.modal",function(){$("#container-name input").focus()}),$("#container-name .act-rename").click(function(e){var t=$("#container-name"),a=t.find(".container-name").val(),n=t.find(".client-id").val(),i=app.func.trim(t.find("input.new-name").val());return 0==i.length?(t.find("input.new-name").focus(),void app.func.stop(e)):(t.modal("hide"),o(n,a,i),void app.func.stop(e))}),$("#container-commit").on("shown.bs.modal",function(e){$("#container-commit .tag").focus()}),$("#container-commit .act-commit").click(function(e){var t=$("#container-commit"),a=t.find(".container-name").val(),n=t.find(".client-id").val(),i=t.find(".repository").val(),l=t.find(".tag").val(),c=t.find(".message").val(),r=t.find(".author").val();return 0==i.length?void t.find(".repository").focus():(t.modal("hide"),void s(n,a,i,l,c,r))})}),$(window).keyup(function(e){var t=$("#search-text");t.is(":focus")&&c()});var E={},b=React.createClass({displayName:"TableRow",inspect:function(){var e=$(this.getDOMNode()),t=e.attr("data-container-id"),a="["+t.substring(0,4)+"] "+e.find(".dropdown a.dropdown-toggle").attr("data-container-name"),n=d("?client="+e.attr("data-client-id"),"");r({title:a,url:"/api/container/inspect/"+t+n})},processes:function(){var e=$(this.getDOMNode()),t=e.find(".dropdown a.dropdown-toggle").attr("data-container-name"),a=d("?client="+e.attr("data-client-id"),"");app.func.link("/container/top/"+t+a)},statlog:function(){var e=$(this.getDOMNode()),t=e.find(".dropdown a.dropdown-toggle").attr("data-container-name"),a=d("?client="+e.attr("data-client-id"),"");app.func.link("/container/statlog/"+t+a)},changes:function(){var e=$(this.getDOMNode()),t=e.find(".dropdown a.dropdown-toggle").attr("data-container-name"),a=d("?client="+e.attr("data-client-id"),"");app.func.link("/container/changes/"+t+a)},_action:function(e,t){var a=$(this.getDOMNode()),n=a.find(".dropdown a.dropdown-toggle").attr("data-container-name"),i=d({client:a.attr("data-client-id")},""),l=t.success?t.success:function(e){var a=e.error?e.error:(t.msg?t.msg:t.action+"ed")+" successfully.";u.setProps({reload:!0}),alert(a)};(!t.confirm||window.confirm(t.confirm+n))&&app.func.ajax({type:"POST",url:"/api/container/"+t.action+"/"+n,data:i,success:l})},restart:function(){R||this._action(this,{action:"restart"})},start:function(){R||this._action(this,{action:"start"})},stop:function(){R||this._action(this,{action:"stop",msg:"stopped"})},kill:function(){R||this._action(this,{action:"kill"})},rm:function(){R||this._action(this,{action:"rm",msg:"removed",confirm:"Are you sure to remove the container?\nID: "})},rename:function(){if(!R){var e=$(this.getDOMNode()),t=e.find(".dropdown a.dropdown-toggle").text(),a=e.find(".dropdown a.dropdown-toggle").attr("data-container-name"),n=$("#container-name");n.find(".title").text(t),n.find("input").val(a),n.find(".container-name").val(a),n.find(".client-id").val(e.attr("data-client-id")),n.modal("show")}},commit:function(){if(!R){var e=$(this.getDOMNode()),t=e.find(".dropdown a.dropdown-toggle").text(),a=e.find(".image").text(),n=$("#container-commit"),i=a.indexOf(":");n.find(".title").text(t),n.find(".repository").val(0==i?a:a.substring(0,i)),n.find(".tag").val(0==i?"":a.substring(i+1)),n.find(".container-name").val(t),n.find(".client-id").val(e.attr("data-client-id")),n.modal("show")}},image:function(){var e=$(this.getDOMNode()),t=e.find(".image").text(),a=d("&c="+e.attr("data-client-id"),"");app.func.link("/images?q="+t+a)},render:function(){var e=this.props.content,t=e.container,a=t.id.substring(0,20),n="",i="",l="",c=t.command,r=t.status;return t.ports&&$.map(t.ports,function(e){l+=(e.IP?e.IP+":":"")+(e.PublicPort?e.PublicPort+"->":"")+e.PrivatePort+"/"+e.Type+","}),t.names&&$.map(t.names,function(e){n+=e.replace("/","")+", ",i=e.replace("/","")}),g&&t.labels&&$.map(t.labels,function(e,t){t==g&&(n=e+"..")}),c.length>13&&(c=c.substring(0,13)+".."),r=r?r.replace(/seconds*/,"sec").replace(/minutes*/,"min").replace(/About /,""):"",R?React.createElement("tr",{key:a+e.endpoint,"data-client-id":e.client.id,"data-container-id":a},React.createElement("td",{className:"data-index"},t.id.substring(0,4)),React.createElement("td",{className:"data-name"},React.createElement("ul",{className:"nav"},React.createElement("li",{className:"dropdown"},React.createElement("a",{className:"dropdown-toggle","data-toggle":"dropdown",href:"#","aria-expanded":"true","data-container-name":i},React.createElement("span",null,n.substring(0,n.length-2)+e.endpoint)),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",null,React.createElement("a",{onClick:this.inspect},"inspect")),React.createElement("li",null,React.createElement("a",{onClick:this.processes},"processes (top)")),React.createElement("li",null,React.createElement("a",{onClick:this.statlog},"stats & logs")),React.createElement("li",null,React.createElement("a",{onClick:this.changes},"changes (diff)")),React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{onClick:this.image},"image")))))),React.createElement("td",{className:"data-name"},c),React.createElement("td",{className:"data-name"},l.substring(0,l.length-1)),React.createElement("td",{className:"data-name image"},t.image),React.createElement("td",{className:"data-name"},r)):React.createElement("tr",{key:a+e.endpoint,"data-client-id":e.client.id,"data-container-id":a},React.createElement("td",{className:"data-index"},t.id.substring(0,4)),React.createElement("td",{className:"data-name"},React.createElement("ul",{className:"nav"},React.createElement("li",{className:"dropdown"},React.createElement("a",{className:"dropdown-toggle","data-toggle":"dropdown",href:"#","aria-expanded":"true","data-container-name":i},React.createElement("span",null,n.substring(0,n.length-2)+e.endpoint)),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",null,React.createElement("a",{onClick:this.inspect},"inspect")),React.createElement("li",null,React.createElement("a",{onClick:this.processes},"processes (top)")),React.createElement("li",null,React.createElement("a",{onClick:this.statlog},"stats & logs")),React.createElement("li",null,React.createElement("a",{onClick:this.changes},"changes (diff)")),React.createElement("li",null,React.createElement("a",{onClick:this.rename},"rename")),React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{onClick:this.restart},"restart")),React.createElement("li",null,React.createElement("a",{onClick:this.start},"start")),React.createElement("li",null,React.createElement("a",{onClick:this.stop},"stop")),React.createElement("li",null,React.createElement("a",{onClick:this.kill},"kill")),React.createElement("li",null,React.createElement("a",{onClick:this.rm},"rm")),React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{onClick:this.commit},"commit")),React.createElement("li",null,React.createElement("a",{onClick:this.image},"image")))))),React.createElement("td",{className:"data-name"},c),React.createElement("td",{className:"data-name"},l.substring(0,l.length-1)),React.createElement("td",{className:"data-name image"},t.image),React.createElement("td",{className:"data-name"},r))}}),x=React.createClass({displayName:"Table",getInitialState:function(){return{data:[]}},load:function(e){p=[],f=[],app.func.ajax({type:"GET",url:"/api/containers",data:{status:v.status},success:function(t){if(t.error)return void alert(t.error);h=t;var a={clients:{},labels:{}},l=$("#filter-label-ids").val();$.map(h,function(e){a.clients[""+e.client.id]=e.client.endpoint.replace(/^.*:\/\//,"").replace(/:.*$/,""),$.map(e.containers,function(e){e.labels&&$.map(e.labels,function(e,t){("all"==l||-1!=l.indexOf(t))&&(a.labels[t]||(a.labels[t]={}),a.labels[t][e]=!0)})})}),$.map(a.clients,function(e,t){p.push({key:t,value:e})}),$.map(a.labels,function(e,t){$.map(e,function(e,a){f.push({key:t,value:a})})}),p.sort(function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}),f.sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:e.value<t.value?-1:e.value>t.value?1:0}),n(),i(),e.setState({data:e.filter()})}})},filter:function(){var e=[];return $.map(h,function(t){(-1==v.client||t.client.id==v.client)&&$.map(t.containers,function(a){if(0==v.label||-1==v.label&&!a.labels)e.push({client:t.client,container:a});else{if(!a.labels)return;var n=!1;$.map(a.labels,function(e,t){n|=v.label==app.func.hash(t+"->"+e)}),n&&e.push({client:t.client,container:a})}})}),e.sort(function(e,t){return e.container.names.join(",")<t.container.names.join(",")?-1:e.container.names.join(",")>t.container.names.join(",")?1:0}),$("#count").text(e.length+" container"+(e.length>1?"s":"")),e},componentDidMount:function(){this.load(this)},componentWillReceiveProps:function(e){return e.reload?void this.load(this):void this.setState({data:this.filter()})},render:function(){var e=h.length>1&&-1==v.client,t=this.state.data.map(function(t,a){var n=t.client,i=t.container,l=t.container.id.substring(0,10);if(""!=v.text){var c=!0;if($.map(v.text.split(" "),function(e){var t=i.id.substring(0,10).toUpperCase().indexOf(e)>-1;$.map(i.names,function(a){t|=a.toUpperCase().indexOf(e)>-1}),t|=i.image.toUpperCase().indexOf(e)>-1,t|=i.command&&i.command.toUpperCase().indexOf(e)>-1,t|=i.status&&i.status.toUpperCase().indexOf(e)>-1,i.ports&&$.map(i.ports,function(a){t|=a.Type.toUpperCase().indexOf(e)>-1,t|=a.IP.indexOf(e)>-1,t|=(""+a.PrivatePort).indexOf(e)>-1,t|=(""+a.PublicPort).indexOf(e)>-1}),c&=t}),!c)return}return React.createElement(b,{key:l+"@"+n.id,index:l+"@"+a,content:{endpoint:e?" @"+n.endpoint.replace(/^.*:\/\//,"").replace(/:.*$/,""):"",client:n,container:i}})});return React.createElement("table",{className:"table table-striped table-hover"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"ID"),React.createElement("th",null,"Names"),React.createElement("th",null,"Command"),React.createElement("th",null,"Ports"),React.createElement("th",null,"Repository & Tags"),React.createElement("th",null,"Status"))),React.createElement("tbody",null,t))}});u=React.render(React.createElement(x,null),document.getElementById("data"))},{}]},{},[1]);